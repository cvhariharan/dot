stages:
  - test
  - security
  - build

jobs:
  - name: Run tests
    stage: test
    image: "docker.io/golang:1.21.3"
    script:
      - go test ./...

  - name: Run checks
    stage: security
    image: "docker.io/golangci/golangci-lint:latest"
    script:
      - golangci-lint run ./...

  - name: Build job linux
    stage: build
    image: "docker.io/golang:1.21.3"
    script:
      - go build -o done main.go
    artifacts:
      - done

